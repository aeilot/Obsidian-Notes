# 基础知识

CPU：执行指令，计算

每一种 CPU 都有自己的汇编指令集

储存器 $\implies$ 指令和数据没有区别，读取到 CPU 中才有区别

汇编语言：机器指令便于记忆的书写格式

储存单元：最小单位是字节，八个位

## 总线

CPU 读写：总线

![[汇编语言王爽著.pdf#page=15&rect=116,1636,1500,1934|汇编语言王爽著, p.5]]

总线：连接 CPU 和其他芯片的导线，分为 地址总线、数据总线、控制总线

地址总线：地址总线上能传送多少个不同的信息，CPU 就可以对多少个储存单元进行寻址（即字节）

导线可以稳定传送的状态：高电平（1），低电平（0）

N 根地址总线 $\implies$ 地址总线的宽度位 $N$ $\implies$ 表示 $N$ 位二进制数 $\implies$ 可寻址 $2^N$ 个内存单元

数据总线：宽度决定数据传送速度（宽度为 $N$，则可以一次传送一个 $N$ 位二进制数据）

控制总线：不同控制线的集合（多少根控制总线 $\implies$ CPU 提供了对外部器件的多少种控制，决定了 CPU 对外部器件的控制能力）

内存读写命令的控制总线：读信号输出、写信号输出

EXT： [[三大总线]]

![[汇编语言王爽著.pdf#page=18&rect=109,571,1505,1500|汇编语言王爽著, p.8]]

## 主板与接口卡

主板：核心器件通过总线相连（CPU、储存器、外围芯片组、扩展插槽）

接口卡：插在扩展插槽上；由于 CPU 不能直接控制外部设备，接口卡直接控制这些外部设备进行工作；接口卡通过总线和 CPU 相连

## 各类储存器芯片

不同器件可以分为两类：RAM 和 ROM

RAM：随机储存器，可读可写，带电存储

ROM：只读存储器，不能写入，关机后不丢失

![[汇编语言王爽著.pdf#page=19&rect=129,164,1558,356|汇编语言王爽著, p.9]]

![[汇编语言王爽著.pdf#page=20&rect=171,1583,1554,2125|汇编语言王爽著, p.10]]

## 内存地址空间

存储器，在物理上都是独立的器件，但是他们都与 CPU 总线相连，并接收控制线中的内存读写命令

CPU 操纵存储器时，把它们都当作内存来看待，总的看作一个逻辑存储器（内存地址空间）

![[汇编语言王爽著.pdf#page=21&rect=220,853,1441,1895|汇编语言王爽著, p.11]]

EXT: [[内存映射 IO]]

# 寄存器（CPU 工作原理）

CPU 由运算器、控制器、寄存器等器件构成

## 通用寄存器

AX、BX、CX、DX

8086CPU 中寄存器 16 位，可以分为两个可以独立使用的八位寄存器

![[汇编语言王爽著.pdf#page=23&rect=181,177,1206,417|汇编语言王爽著, p.13]]![[汇编语言王爽著.pdf#page=24&rect=163,1138,1477,1466|汇编语言王爽著, p.14]]

![[汇编语言王爽著.pdf#page=25&rect=190,1461,1544,1940|汇编语言王爽著, p.15]]

## 几条汇编指令

![[汇编语言王爽著.pdf#page=26&rect=114,1524,1538,1939|汇编语言王爽著, p.16]]

## 物理地址

所有内存单元构成的储存空间是一个一维的线性空间，每个内存单元在这个空间中有唯一的地址，称为物理地址

## 16 位结构 CPU

![[汇编语言王爽著.pdf#page=28&rect=111,285,1509,582|汇编语言王爽著, p.18]]

在 8086 CPU 内部，能够一次处理、传输、暂时存储的信息的最大长度是 16 位

## 8086CPU 寻址方法

![[汇编语言王爽著.pdf#page=29&rect=189,721,1489,1501|汇编语言王爽著, p.19]]

合成两个 16 位地址来形成 20 位地址

![[汇编语言王爽著.pdf#page=29&rect=184,275,1527,723|汇编语言王爽著, p.19]]

> 物理地址 = 段地址 $\times$ 16 （左移四位） + 偏移地址

![[汇编语言王爽著.pdf#page=31&rect=99,1935,1554,2059|汇编语言王爽著, p.21]]

这种方法使得表达物理地址所需要的位数减少

## 段的概念

内存没有分段，CPU 进行段的划分：由于基础地址 + 偏移地址寻址方法，我们用分段的方式来管理内存

可以把若干连续的内存单元看成一个段，用偏移地址来定位

## 段寄存器

段地址存储在段寄存器中：CS DS SS ES

[[段寄存器]]

### CS 和 IP

CS、IP 指示了 CPU 当前要读取指令的地址

CS 位代码段寄存器，IP 为指令指针寄存器

![[汇编语言王爽著.pdf#page=34&rect=101,1926,1570,2062|汇编语言王爽著, p.24]]

8086 机中，任意时刻，CPU 将 CS:IP 指向的内容当作指令执行

读取一条指令之后，IP 的值自动增加

![[汇编语言王爽著.pdf#page=40&rect=153,1203,1541,1463|汇编语言王爽著, p.30]]

8086 CPU 加电启动或复位后，CS IP 被设置为 CS=F000H，IP = FFFFH

**第一条指令的位置**: 计算出的 `FFFF0H` 这个物理地址，就是 8086 PC 刚启动时，CPU 去读取并执行第一条指令的地方。这个地址位于 1MB 内存空间的**最顶端**（1MB = 100000H，而 FFFF0H 非常接近这个地址）。

CPU 将 CS:IP 指向的内存单元中的内容看作指令

## 修改 CS、IP 的指令

MOV 不能用来修改 CS、IP 的值

转移指令：能够修改 CS、IP 的内容，比如 JMP 指令

![[汇编语言王爽著.pdf#page=41&rect=123,1080,1508,1829|汇编语言王爽著, p.31]]

![[汇编语言王爽著.pdf#page=43&rect=98,833,1541,1446|汇编语言王爽著, p.33]]

![[汇编语言王爽著.pdf#page=53&rect=102,1062,1544,1717|汇编语言王爽著, p.43]]

