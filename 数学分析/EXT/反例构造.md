构造反例的核心是**抓住定义中的“漏洞”**。数学命题的条件通常非常精确，直觉却可能是模糊的。反例的构造就是利用这种精确性，创造出满足所有前提条件、但却不满足结论的“极端”或“病态”函数。

主要有两大策略：

1. **高频振荡 (High-Frequency Oscillation):** 用于打破关于函数极限与导数极限之间关系的直觉。
    
2. **局部与全局的分离 (Local vs. Global Properties):** 用于打破“局部性质可以推广到邻域”的直觉，通常使用“几乎处处不连续”的函数。
    

---

### 策略一：高频振荡策略

这是最常用、最强大的策略，尤其适用于处理涉及极限和导数的问题，比如你刚才提问的 (2) 和 (3)。

核心思想：

一个函数的值可以趋于稳定（或以某种可预测的方式增长/减少），但它的**斜率（导数）**却可以剧烈地、永不停止地来回摆动。

**工具箱（Building Blocks）：**

- **振荡函数：** $\sin(x)$ 或 $\cos(x)$。
    
- **频率控制器：** 为了让振荡越来越快，我们不对 $x$ 本身取正弦，而是对一个增长更快的函数取正弦。
    
    - 当 $x \to +\infty$ 时，使用 $\sin(x^2)$, $\sin(e^x)$ 等。
        
    - 当 $x \to 0$ 时，使用 $\sin(1/x)$, $\sin(1/x^2)$ 等。
        
- **幅度控制器：** 为了让函数的**值**收敛或满足特定条件，我们需要用一个函数去“压制”或“放大”振荡的幅度。
    
    - 要想让 $f(x) \to 0$，可以用 $1/x$ 去压制，例如 $f(x) = \frac{\sin(x^2)}{x}$。
        
    - 要想让 $f(x) \to \infty$，可以加上一个趋于无穷的项，例如 $f(x) = x + \sin(x)$。
        

**应用分析：**

- **对于命题 (3):** $\lim_{x \to +\infty} f(x)$ 存在，但 $\lim_{x \to +\infty} f'(x)$ 不为 0。
    
    1. **目标：** $f(x) \to L$（比如 $L=0$），但 $f'(x)$ 的极限不存在。
        
    2. **构造：**
        
        - 首先，让函数值趋于 0。选择幅度控制器 $1/x$。
            
        - 然后，引入一个振荡，且要让导数不收敛。如果用 $\sin(x)$，得到 $f(x) = \sin(x)/x$，它的导数 $f'(x) = \frac{x\cos x - \sin x}{x^2} \approx \frac{\cos x}{x}$，极限还是 0，失败。
            
        - 我们需要更快的振荡。使用频率控制器 $x^2$，得到 $f(x) = \frac{\sin(x^2)}{x}$。
            
        - 求导：$f'(x) = \underbrace{2\cos(x^2)}_{\text{持续振荡}} - \underbrace{\frac{\sin(x^2)}{x^2}}_{\to 0}$。导数的第一项永不停止地在 $[-2, 2]$ 之间振荡，所以极限不存在。成功！
            
- **对于命题 (2):** $\lim_{x \to a^+} f(x) = \infty$，但 $\lim_{x \to a^+} f'(x)$ 不为 $\infty$。
    
    1. **目标：** $f(x) \to \infty$，但 $f'(x)$ 的极限不是 $\infty$（可以不存在，也可以是 $-\infty$）。
        
    2. **构造：**
        
        - 首先，让函数值趋于 $\infty$。当 $x \to 0^+$ 时，选择一个主体趋势 $1/x$。
            
        - 然后，添加一个振荡项，让导数“混乱”。选择 $\cos(1/x)$。
            
        - 组合成函数 $f(x) = \frac{1}{x} + \cos\left(\frac{1}{x}\right)$。
            
        - 求导：$f'(x) = -\frac{1}{x^2} + \frac{1}{x^2}\sin\left(\frac{1}{x}\right) = -\frac{1}{x^2}\left(1 - \sin\left(\frac{1}{x}\right)\right)$。
            
        - 分析导数：当 $x \to 0^+$ 时，$-1/x^2 \to -\infty$。而 $(1 - \sin(1/x))$ 在 $[0, 2]$ 之间振荡。因此 $f'(x)$ 的值在 $-\infty$ 和 $0$ 之间来回跳动，极限不存在。成功！
            

---

### 策略二：局部与全局的分离策略（“病态函数”策略）

这个策略主要用于处理涉及“在一点的性质”与“在一个邻域的性质”之间关系的问题，比如你提问的 (1)。

核心思想：

构造一个函数，它在绝大多数点上都表现得非常“坏”（比如处处不连续），但通过精巧的设计，让它在某一个点上恰好满足了某个“好”的性质（比如连续或可导）。

**工具箱（Building Blocks）：**

- **狄利克雷函数 (Dirichlet Function):** 这是最经典的工具。$D(x) = \begin{cases} 1 & x \in \mathbb{Q} \\ 0 & x \notin \mathbb{Q} \end{cases}$。它处处不连续。
    
- **“压制”因子：** 类似于策略一的幅度控制器，我们用一个在某点为零的函数去乘以这个“坏”函数，从而在那个点“驯服”它。常用的有 $(x-x_0)$ 或 $(x-x_0)^2$。
    

**应用分析：**

- **对于命题 (1):** $f(x)$ 在 $x_0$ 可导，但 $f(x)$ 在 $x_0$ 的任何邻域内都不连续。
    
    1. **目标：** 在 $x_0=0$ 点可导，但在任何 $c \neq 0$ 点都不连续。
        
    2. **构造：**
        
        - 基础的“坏”函数：$g(x) = \begin{cases} 1 & x \in \mathbb{Q} \\ 0 & x \notin \mathbb{Q} \end{cases}$ （处处不连续）。
            
        - 如何让它在 $x_0=0$ 处可导？我们需要让它在 $0$ 点的极限存在且为 $0$，并且导数也存在。
            
        - 用 $x$ 乘以它：$h(x)=x \cdot g(x)$。这个函数在 $x=0$ 处是连续的，但在其他地方不连续。我们来检查可导性：$\lim_{h\to 0} \frac{h \cdot g(h) - 0}{h} = \lim_{h\to 0} g(h)$，这个极限不存在。失败。
            
        - 我们需要更强的压制。用 $x^2$ 乘以它：$f(x) = x^2 \cdot g(x) = \begin{cases} x^2 & x \in \mathbb{Q} \\ 0 & x \notin \mathbb{Q} \end{cases}$。
            
        - 检查在 $x_0=0$ 的可导性：$f'(0) = \lim_{h\to 0} \frac{f(h) - f(0)}{h} = \lim_{h\to 0} \frac{h^2 \cdot g(h)}{h} = \lim_{h\to 0} h \cdot g(h)$。因为 $g(h)$ 有界，$h \to 0$，所以根据夹逼定理，极限是 $0$。$f(x)$ 在 $0$ 点可导。
            
        - 检查邻域内的连续性：在任何 $c \neq 0$ 的点，如我们之前的分析，它都是不连续的。成功！
            

### 总结表

|**待反驳的命题类型**|**核心策略**|**常用工具/函数**|**例子 (来自你的问题)**|
|---|---|---|---|
|函数极限与导数极限的关系 (如 $x \to \infty$ 或 $x \to a$)|**高频振荡**|$\sin(x^2), \cos(1/x)$ (频率) $1/x, x$ (幅度)|$f(x) = \frac{\sin(x^2)}{x}$ $f(x) = \frac{1}{x} + \cos(\frac{1}{x})$|
|“在一点成立” $\implies$ “在邻域成立”|**局部与全局的分离**|狄利克雷函数 + $(x-x_0)^k$ (压制因子)|$f(x) = \begin{cases} x^2 & x \in \mathbb{Q} \\ 0 & x \notin \mathbb{Q} \end{cases}$|

掌握了这两种思维方式，你就能构造出分析学中大部分常见的反例。关键在于，当你看到一个命题时，不要只凭直觉，而是要思考：“定义允许什么样的极端情况发生？”